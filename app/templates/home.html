{% extends "base.html" %}

{% block title %}
    SGE - Home
{% endblock title %}

{% block content %}
    
    {% include "components/_products_metrics.html" %}
    {% include "components/_sales_metrics.html" %}
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.5.0/chart.umd.min.js"></script>

    <div class='row mt-4 justify-content-center'>
        <div class='col-md-6 text-center'>
            <h5>Valor de Vendas (Últimos 7 dias)</h5>
            <canvas id='dailySalesChart'></canvas>
        </div>
        <div class='col-md-6 text-center'>
            <h5>Quantidade de Vendas Diária </h5>
            <canvas id='dailySalesQuantityChart'></canvas>

        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                
                var dailySalesData = JSON.parse('{{daily_sales_data|safe}}')
                var dailySalesQuantityData = JSON.parse('{{daily_sales_quantity_data|safe}}')

                var ctxDailySales = document.getElementById('dailySalesChart').getContext('2d');
                var dailySalesChart = new Chart(ctxDailySales, {
                    type: 'line',
                    data: {
                        labels: dailySalesData.dates,
                        datasets: [{
                            label: 'Valor em vendas (R$)',
                            data: dailySalesData.values,
                            fill: false,
                            borderColor:'rgba(54, 162, 235, 1)',
                            borderWidth: 2,
                            tension: 0.5
                        }]
                    },
                    options: {
                        scales:{
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                var ctxDailySalesQuantity = document.getElementById('dailySalesQuantityChart').getContext('2d');
                var dailySalesQuantityChart = new Chart(ctxDailySalesQuantity, {
                    type: 'bar',
                    data: {
                        labels: dailySalesQuantityData.dates,
                        datasets: [{
                            label: 'Quantidade de vendas',
                            data: dailySalesQuantityData.values,
                            backgroundColor:'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                        }]
                    },
                    options: {
                        scales:{
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

            });
        </script>

    </div>

    {% endblock content %}
